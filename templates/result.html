{% extends 'base.html' %}
<!DOCTYPE html>
<html lang="en">
  <head>
    {% block head %}
    {{super()}}
    {% endblock %}
  </head>
  <body>
    {% block body %}
    {{super()}}
    <header></header>
    <main>
      <div class="wrapper" style="display: flex; flex-direction: row; justify-content: space-evenly;">
        <div class="docPreview">
          <img src="/resultImg1" onclick="downloadURL('/resultImg1')">
        </div>
        <div class="container">
          <p style="width: unset; margin: 20px; font-size: 3rem; font-weight: bolder;">Результат:</p>

          <div class="docview">
            <a href="/resultDoc" class="doc">
              <div class="doc">
                <img src="{{url_for('static', filename='images/document.png')}}" align="left" width="50px" height="50px" style="margin: 20px">
                summary.docx
                <img src="{{url_for('static', filename='images/download.png')}}" align="right" width="50px" height="50px" style="margin-right: 30px">
              </div>
            </a>
            <a href="/resultImg1" class="doc">
              <div class="doc">
                <img src="{{url_for('static', filename='images/document.png')}}" align="left" width="50px" height="50px" style="margin: 20px">
                result1.png
                <img src="{{url_for('static', filename='images/download.png')}}" align="right" width="50px" height="50px" style="margin-right: 30px">
              </div>
            </a>
            <a href="/resultImg2" class="doc">
              <div class="doc">
                <img src="{{url_for('static', filename='images/document.png')}}" align="left" width="50px" height="50px" style="margin: 20px">
                result2.png
                <img src="{{url_for('static', filename='images/download.png')}}" align="right" width="50px" height="50px" style="margin-right: 30px">
              </div>
            </a>

            <button class="download" onclick="downloadAll()">Скачать</button>
          </div>
          <a href="/index" class="anim" style="font-weight: bolder;position: absolute; left: 60px; top: 85vh; font-size: 1.5rem;">Вернуться на главную</a>
        </div>
        <div class="docPreview">
          <img src="/resultImg2" onclick="downloadURL('/resultImg2')">
        </div>
      </div>
    </main>

    <script>
      var links = [
        "/resultDoc",
        "/resultImg1",
        "/resultImg2"
      ]

      function downloadURL(url)
      { 
        var link = document.createElement("a");
        link.setAttribute("download", null);
        link.style.display = "none";
        document.body.appendChild(link);
        link.setAttribute('href', url);
        link.click();
        document.body.removeChild(link); 
      }

      function downloadAll()
      {
        var urls = links;
        var link = document.createElement("a");
        link.setAttribute("download", null);
        link.style.display = "none";

        document.body.appendChild(link);

        for (var i = 0; i < urls.length; i++)
        {
          link.setAttribute('href', urls[i]);
          link.click();
        }

        document.body.removeChild(link);
      }
    </script>
    {% endblock %}
  </body>
</html>
